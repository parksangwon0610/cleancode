# 객체와 자료구조

## 1. 자료 추상화

* 자료를 세세하게 공개하기보다는 추상적인 개념으로 표현하는 편이 좋다.
* 인터페이스나 조회/설정 함수만으로는 추상화가 이뤄지지 않는다.
* 객체가 포함하는 자료를 표현할 가장 좋은 방법을 고민해야한다.
* 아무생각 없이 조회/설정 함수를 추가하지 말자.

```java
	public interface Vehicle {
    double getPercentFuelRemaining();
  }
```

*자동차 연료 상태를 백분율이라는 추상적인 개념으로 알려주고있다*



## 2. 자료/객체 비대칭

* 절차적 코드는

  * 기존 자료 구조를 변경하지 않으면서, 새 함수 추가가 쉽다.
  * 새로운 자료구조를 추가하기 어렵다. 모든 함수를 고쳐야한다.

* 객체 지향 코드는

  * 기존 함수를 변경하지 않으면서, 새 클래스 추가가 쉽다.
  * 새로운 함수를 추가하기 어렵다. 모든 클래스를 고쳐야한다.

  

*객체 지향 코드에서 어려운 변경은 절차적인 코드에서 쉽고, 절차적인 코드에서 어려운 변경은 객체 지향코드에서 쉽다!*

새로운 자료 타입이 필요한 경우, 클래스와 객체 지향 기법이 가장 적합.

새로운 함수가 필요한 경우, 절차적인 코드와 자료구자가 적합.



## 3. 디미터 법칙

디미터 법칙은 Heuristic 으로, 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙. 객체는 자료를 숨기고 함수를 공개한다. 객체는 조회 함수로  내부구조를 공개하면 안된다.

* 클래스 C 의 매서드 f는 아래의 메서드만 호출해야한다.
  * 클래스 C
  * f 가 생성한 객체 
  * f 인수로 넘어온 객체
  * C 인스턴스 변수에 저장된 객체

*위 허용된 메서드가 반환하는 객체의 매서드는 호출하면 안된다.*

```java
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
```



### 3-1 기차 충돌

위와 같은 코드를 기차충돌 (Train Wreck) 이라한다. 여러 객체가 한줄로 이어진 기차처럼 보이는 것. 이런 표현은 피해야한다.

위 코드는 나누는 것이 좋다.

```
const a = ctxt.getOptions();
const b = a.getScratchDir();
const c = b.getAbsolutePath();
```

### 3-2 잡종 구조

객체와 자료구조가 뒤섞인 잡종 구조가 나올 수 있다. 중요한 기능을 수행하는 함수도 있고, 공개 변수나 공개 조회/설정 함수도 있다. 이런 잡종 구조는 새로운 자료구조나 함수를 추가하기가 어렵다. 

### 3-3 구조체 감추기

위처럼 내부 객체를 드러내기보다는, 내부의 구조를 드러내지 않으면서 모듈에서 해당 함수를 자신이 몰라야하는 여러 객체를 탐색할 필요가없다 객체 내부에서 임무를 부여하면 된다.



## 4. 자료 전달 객체

공개 변수만 있고 함수가 없는 클래스. Data Transfer Object(DTO) 라 함. 데이터베이스로부터 쿼리요청에 의한 데이터나, 소켓 등 수신된 첫번째 데이터를 보통 지칭함. 아래는 address.java DTO

```java
public class Address {
	private String street;
	private String city;
	
	public Address( String street, String city ) {
		this.street = street;
		this.city = city;
	}
	public String getStreet() {
		return street;
	}
	public String getCity() {
		return city;
	}
}
```

### 4-1 활성 레코드

활성레코드는 DTO 객체의 조회/설정 함수인 자료구조 뿐만 아니라, 대개 save나 find 같은 탐색 함수도 제공한다. 자료를 직접 변환한 결과다. 비지니스 로직을 담으면서 내부 자료를 숨기는 객체는 따로 생성해야한다.



## 결론

객체는 동작을 공개하고, 자료를 숨긴다. 자료구조는 별다른 동작 없이 자료를 노출한다. 

새로운 자료 타입 추가 등 유연성이 필요하면 객체,

새로운 동작을 추가하는 유연성이 필요하면 자료구조, 절차적인 코드가 적합하다.